{% extends "base.html" %}

{% block content %}
    <div class="controls">
        <button class="btn btn-start" id="start-btn" onclick="startStream()">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
        <button class="btn btn-stop" id="stop-btn" onclick="stopStream()" disabled>‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        <button class="btn btn-secondary" onclick="checkCamera()" title="–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–º–µ—Ä—ã">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        <button class="btn btn-secondary" onclick="refreshStream()" id="refresh-btn" title="–û–±–Ω–æ–≤–∏—Ç—å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
        <button class="btn btn-secondary" onclick="restartStream()" id="restart-btn" title="–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç—Ä–∏–º">üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
    </div>
    
    <div class="status-panel">
        <div class="status-row">
            <span>–°—Ç–∞—Ç—É—Å —Å—Ç—Ä–∏–º–∞:</span>
            <span id="stream-status">
                <span class="status-indicator inactive"></span>
                <strong>–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</strong>
            </span>
        </div>
        <div class="status-row">
            <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–¥—Ä–æ–≤:</span>
            <span id="frame-count">0</span>
        </div>
        <div class="status-row">
            <span>–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:</span>
            <span id="connection-status">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ</span>
        </div>
    </div>
    
    <div class="status-panel" id="camera-status-panel" style="margin-top: 10px;">
        <div class="status-row">
            <span>–¢–µ–∫—É—â–∞—è –∫–∞–º–µ—Ä–∞:</span>
            <span id="current-camera">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
        <div class="status-row">
            <span>–°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–º–µ—Ä—ã:</span>
            <span id="camera-ready-status">
                <span class="status-indicator inactive"></span>
                <strong>–ü—Ä–æ–≤–µ—Ä–∫–∞...</strong>
            </span>
        </div>
    </div>
    
    <div class="camera-selection">
        <h3>üìπ –í—ã–±–æ—Ä –∫–∞–º–µ—Ä—ã</h3>
        <div id="camera-list" class="camera-list">
            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–∞–º–µ—Ä...</div>
        </div>
    </div>
    
    <div class="video-container">
        <img src="" alt="Video Stream" id="video-stream" style="display: none;">
    </div>
    
    <div style="margin-top: 20px;">
        <button class="btn btn-secondary" onclick="showCameras()">
            üìã –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–∞–º–µ—Ä—ã
        </button>
        <a href="/status" class="btn btn-secondary">üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞</a>
        <a href="/logs" class="btn btn-secondary">üìù –õ–æ–≥–∏</a>
    </div>
{% endblock %}
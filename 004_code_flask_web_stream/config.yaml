# Конфигурационный файл для Flask Webcam Stream
# Версия 04 - Поддержка YAML конфигурации

# Параметры сервера
server:
  host: "0.0.0.0"           # Хост для прослушивания
  port: 5000                # Порт сервера
  debug: false              # Режим отладки
  threaded: true            # Многопоточный режим
  max_concurrent_streams: 4  # Добавьте эту строку

# Параметры камеры
camera:
  # Основные настройки
  device: 1                 # Номер устройства камеры (0, 1, 2...)
  backend: "auto"           # Бэкенд: "auto", "v4l2", "ffmpeg", "direct"
  direct_path: "/dev/video0" # Прямой путь к устройству (используется при backend: "direct")
  
  # Разрешение и качество
  #width: 1280               # Ширина кадра
  #height: 720               # Высота кадра
  width: 640               # Ширина кадра
  height: 480               # Высота кадра

  fps: 15                   # Кадров в секунду
  
  # Настройки JPEG сжатия
  jpeg_quality: 85          # Качество JPEG (1-100)
  
  # Тестирование бэкендов (если backend: "auto")
  test_backends:
    - "default"
    # - "v4l2_video0"
    # - "v4l2_video1"
    # - "ffmpeg_video0"
    # - "direct_video0"
    # - "direct_video1"

# Параметры потока
stream:
  max_error_count: 20       # Максимальное количество ошибок чтения
  frame_log_interval: 60    # Интервал логирования (каждые N кадров)
  buffer_size: 30  # Размер буфера

# Пути
paths:
  templates_folder: "templates"  # Папка с HTML шаблонами
  log_file: "stream.log"           # Файл логов (опционально)

# Интервалы обновления
intervals:
  status_update: 2000       # Интервал обновления статуса (мс)
  error_retry_delay: 1000   # Задержка между попытками переподключения (мс)

# Дополнительные настройки
advanced:
  auto_restart: true        # Автоматический перезапуск при ошибках
  verbose_logging: true     # Подробное логирование
  enable_metrics: true      # Включить сбор метрик